<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link rel="stylesheet" href="../css/styles.css" />
    <link rel="stylesheet" href="../css/bootstrap.css" />
    <link rel="stylesheet" href="../css/bootstrap-grid.css" />
    <link rel="stylesheet" href="../css/bootstrap-icons.css" />
  </head>
  <body>
    <!-- SIDEBAR -->
    <div class="sidebar">
      <nav class="nav flex-column">
        <a href="./index.html" class="d-flex justify-content-center mb-5"
          ><img src="../icons/appIcon.png" alt="Logo"
        /></a>
        <a class="nav-link mb-3" href="./index.html" aria-current="page">
          <p></p>
          <span class="icon">
            <i class="bi bi-grid-1x2"></i>
          </span>
          <span class="description">Dashboard</span>
        </a>

        <a
          class="nav-link mb-3"
          data-bs-toggle="collapse"
          data-bs-target="#submenuBookshelf"
          role="button"
          aria-expanded="false"
          aria-controls="submenuBookshelf"
        >
          <p></p>
          <span class="icon">
            <i class="bi bi-book"></i>
          </span>
          <span class="description">
            Bookshelf <i class="bi bi-caret-down"></i>
          </span>
        </a>
        <div class="sub-menu collapse mb-1" id="submenuBookshelf">
          <a href="./bookshelf-books.html" class="nav-link mb-2">
            <p></p>
            <span class="icon">
              <i class="bi bi-book-fill"></i>
            </span>
            <span class="description">Books</span>
          </a>
          <a href="./bookshelf-copies.html" class="nav-link mb-2">
            <p></p>
            <span class="icon">
              <i class="bi bi-book-half"></i>
            </span>
            <span class="description">Copies</span>
          </a>
        </div>

        <!-- Transactions -->
        <a
          class="nav-link mb-3"
          data-bs-toggle="collapse"
          data-bs-target="#submenuTransactions"
          role="button"
          aria-expanded="false"
          aria-controls="submenuTransactions"
        >
          <p></p>
          <span class="icon">
            <i class="bi bi-person-lines-fill"></i>
          </span>
          <span class="description">
            Transactions <i class="bi bi-caret-down"></i>
          </span>
        </a>
        <div class="sub-menu collapse mb-1" id="submenuTransactions">
          <a href="./transactions_borrow.html" class="nav-link mb-2">
            <p></p>
            <span class="icon">
              <i class="bi bi-calendar-range-fill"></i>
            </span>
            <span class="description">Borrows</span>
          </a>
          <a href="./transaction_library.html" class="nav-link mb-2">
            <p></p>
            <span class="icon">
              <i class="bi bi-database-fill-gear"></i>
            </span>
            <span class="description">Library</span>
          </a>
        </div>

        <a class="nav-link mb-3" href="./students.html">
          <p></p>
          <span class="icon">
            <i class="bi bi-person-badge"></i>
          </span>
          <span class="description">Student Page</span>
        </a>
      </nav>
    </div>

    <!-- MAIN -->

    <main class="main-content d-flex flex-column">
      <div id="image-container">
        <img src="../images/bcu_building2.jpg" alt="" id="background" />
      </div>
      <h2>Student List</h2>
      <form class="d-flex mb-2">
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-success" type="submit"><span class="bi bi-search"></span></button>
      </form>
      <div class="btn-group align-self-md-end mb-2">
        <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">Filter</button>
        <ul class="dropdown-menu" id="departmentFilter">
          
        </ul>
      </div>

      <table class="table table-striped table-hover">
        <thead>
          <tr class="table-info">
            <th>Student ID</th>
            <th>Student Name</th>
            <th>Year</th>
            <th>Course</th>
            <th>Department</th>
            <th>Status</th>
            <th>Date Borrowed</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
      <button id="addStudentBtn" type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#addStudentContent">Add student Record</button>

      <div class="modal fade" id="addStudentContent" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header bg-info text-white">
              <h5 class="modal-title">Add Student</h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <div class="input-group input-group-sm mb-3">
                <span class="input-group-text">Student ID</span>
                <input
                  name="student_id"
                  type="text"
                  class="form-control"
                  required
                />
              </div>
              <div class="input-group input-group-sm mb-3">
                <span class="input-group-text">Student Name</span>
                <input
                  name="student_name"
                  type="text"
                  class="form-control"
                  required
                />
              </div>
              <div class="input-group input-group-sm mb-3">
                <span class="input-group-text">Course</span>
                <select
                  name="course_id"
                  id="courseSelect"
                  class="form-control"
                  required
                >
                  <option value="">Loading...</option>
                </select>
              </div>
              <div class="input-group input-group-sm mb-3">
                <span class="input-group-text">Year Level</span>
                <input
                  name="student_year"
                  type="number"
                  class="form-control"
                  required
                />
              </div>
              <div class="input-group input-group-sm mb-3">
                <span class="input-group-text">Contact Number</span>
                <input
                  name="contact_number"
                  type="number"
                  max="11"
                  class="form-control"
                  required
                />
              </div>
            </div>
          </div>
        </div>
      </div>

      <script>
        document.addEventListener("DOMContentLoaded", () => {
          const params = new URLSearchParams(window.location.search);
          const modalId = params.get("modal");

          if (modalId) {
            const modalEl = document.getElementById(modalId);
            if (modalEl) {
              const modal = new bootstrap.Modal(modalEl);
              modal.show();
            }
          }
        });
      </script>
    </main>

    <script src="../js/bootstrap.bundle.js"></script>
    <script src="../js/neutralino.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/sql-wasm.js"></script>
    <script src="../js/database-connection.js"></script>
    <script src="../js/create-table.js"></script>
    <script src="../js/database-operations.js"></script>
    <script src="../js/frontend-operations.js"></script>
    <script src="../js/getFromDB.js"></script>
    <script src="../js/insertIntoDB.js"></script>
    <script src="../js/renderer.js"></script>
    <script src="../js/filter.js"></script>
    <script src="../js/search.js"></script>
    <script src="../js/popup.js"></script>
    <script src="../js/app.js"></script>
  </body>
</html>
